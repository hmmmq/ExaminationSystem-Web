<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="canonical" href="http://setTheBaseURLInProjectSettings.com/Paper.html"/>
    <meta name="robots" content="index, follow"/>
    <link rel="shortcut icon" type="image/png" th:href="@{${staticpath}+'img/favicon.png'}">

    <link rel="stylesheet" type="text/css" th:href="@{${staticpath}+'css/bootstrap.min.css?2188'}">
    <link rel="stylesheet" type="text/css" th:href="@{${staticpath}+'css/style.css?3660'}">
    <link rel="stylesheet" type="text/css" th:href="@{${staticpath}+'css/animate.min.css?7481'}">
    <link rel="stylesheet" type="text/css" th:href="@{${staticpath}+'css/cookieconsent.min.css?8703'}">
    <script type="text/javascript" th:src="@{${staticpath}+'js/jquery-3.5.1.min.js'}"></script>
    <link rel="stylesheet" type="text/css" th:href="@{${staticpath}+'css/all.min.css'}">

    <title>Paper</title>


    <!-- Analytics -->

    <!-- Analytics END -->

</head>
<body>

<!-- Preloader -->
<div id="page-loading-blocs-notifaction" class="page-preloader"></div>
<!-- Preloader END -->
<a href="/student/getstudent" >
    <span id="studentpage"></span>
</a>
<input type="hidden" id="stuId" th:value="${stuid}"/>
<input type="hidden" id="examId" th:value="${examcreate.examId}"/>
<!-- Main container -->
<div class="page-container">

    <!-- bloc-9 -->
    <div class="bloc bg-paperBanner1 l-bloc" id="bloc-9">
        <div class="container bloc-sm">
            <div class="row">
                <div class="col">
                    <nav class="navbar navbar-light row navbar-expand-md" role="navigation">
                        <a class="navbar-brand link-company-style ltc-white-2"><span
                                th:text="${examcreate.title}"></span></a>
                        <div class="navbar-content-area col">
                            <a href="#"><img th:src="@{${staticpath}+'img/lazyload-ph.png'}"
                                             th:data-src="@{${staticpath}+'img/assest.jpeg'}"
                                             class="img-fluid rounded-circle img-placeholder-us-style float-lg-right lazyload"
                                             alt="assest.jpeg"/></a>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- bloc-9 END -->

    <!-- bloc-10 -->
    <div class="bloc l-bloc" id="bloc-10">
        <div class="container bloc-lg bloc-md-lg">
            <div class="row">
                <div class="col">
                    <div class="card card-rd bgc-tea-green">
                        <div class="card-body card-body-bloc-10-style">
                            <h4 class="mg-md h4-style text-lg-center">
                                Last time: &nbsp;<strong th:text="${examcreate.duration}" id="duration"
                                                         th:onclick="start([[${examcreate.duration}]])">120:55</strong>
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row voffset">
                <div class="col-sm-8">
                    <h3 class="mg-md tc-united-nations-blue">
                        <strong id="index"></strong><strong id="type">.&nbsp; Single &nbsp;Choice</strong><br><input
                            type="hidden" id="answer" value=""/><input type="hidden" id="rightAnswer" value=""/><input
                            type="hidden" id="point" value=""/><input type="hidden" id="itemId" value=""/>
                    </h3>
                    <p id="content">
                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.
                        Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus
                        mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa
                        quis enim.
                    </p>
                    <ul class="list-unstyled list-sp-lg">
                        <li>
                            <div class="card choice">
                                <div class="card-header">
                                    <h5 class="mg-clear">
                                        <strong><span class='choiceName'>A</span>.</strong>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p id="a">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula
                                        eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient
                                        montes, nascetur ridiculus mus.
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card choice">
                                <div class="card-header">
                                    <h5 class="mg-clear">
                                        <strong><span class='choiceName'>B</span>.</strong>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p id="b">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula
                                        eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient
                                        montes, nascetur ridiculus mus.
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card choice">
                                <div class="card-header">
                                    <h5 class="mg-clear">
                                        <strong><span class='choiceName'>C</span>.</strong>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p id="c">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula
                                        eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient
                                        montes, nascetur ridiculus mus.
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card choice">
                                <div class="card-header">
                                    <h5 class="mg-clear">
                                        <strong><span class='choiceName'>D</span>.</strong>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p id="d">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula
                                        eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient
                                        montes, nascetur ridiculus mus.
                                    </p>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <div class="row">
                        <div class="col">
                            <h3 class="mg-md text-lg-right tc-united-nations-blue">
                                <strong>Question number</strong>
                            </h3>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="col" th:each="itemexamstu:${examcreatestu.itemExamStus}">
                            <ul class="list-unstyled">
                                <li class="bloc-style">
                                    <a class="btn btn-lg btn-sq btn-block btn-united-nations-blue"><span
                                            th:text="${itemexamstuStat.count}"
                                            th:onclick="change([[${itemexamstu}]],[[${itemexamstuStat.count}]])"
                                            th:id=" 'no'+ ${itemexamstuStat.count} "></span></a>
                                </li>
                            </ul>
                        </div>


                    </div>
                    <div class="row">
                        <div class="col">
                             <a  class="btn btn-lg btn-block btn-tea-green" > <span id="complete">Complete</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1',this)">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 32 32">
            <path class="scroll-to-top-btn-icon" d="M30,22.656l-14-13-14,13"/>
        </svg>
    </a>
    <!-- ScrollToTop Button END-->


    <!-- bloc-2 -->
    <div class="bloc bgc-white l-bloc" id="bloc-2">
        <div class="container bloc-md">
            <div class="row">
                <div class="col-12">
                    <img th:src="@{${staticpath}+'img/lazyload-ph.png'}" th:data-src="@{${staticpath}+'img/logo.png'}"
                         class="img-fluid mx-auto d-block img-3-style lazyload" alt="logo"/>
                    <p class="mg-sm mx-auto d-block text-lg-center">
                        Copyright © 2021 Foodie. All Rights Reserved.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- bloc-2 END -->

</div>
<!-- Main container END -->

<script>
    function change(itemexamstu, count) {
        if ($("#index").text() != '') {
            var answer = $("#answer").val();
            var rightAnswer = $("#rightAnswer").val() + '';
            answer = answer.toUpperCase();
            rightAnswer = rightAnswer.toUpperCase();
            var point = $("#point").val() + '';
            var isCorrect = true;

            for (i = 0; i < rightAnswer.length; i++) {
                if (answer.indexOf(rightAnswer.charAt(i)) < 0) isCorrect = false;
            }

            var stuPoint = 0;
            if (isCorrect) stuPoint = point;
            var itemEditStu = {
                itemId: $("#itemId").val(),
                stuId: $("#stuId").val(),
                stuAnswer: $("#answer").val(),
                isCorrect: isCorrect,
                stuPoint: stuPoint
            };
            $.ajax({
                type: "PUT",
                url: "/student/item/edit/student",
                data: itemEditStu,
                success: function (data) {
                    if (data.status == 401) {
                        alert("测试为空或服务器错误，保存失败");
                    } else {

                    }
                },
                dataType: "json"
            });
        }


        $("#answer").val('');
        $("#itemId").val(itemexamstu.itemExam.itemId);
        $("#index").text(count);
        $("#content").text(itemexamstu.itemExam.content);
        $("#a").text(itemexamstu.itemExam.a);
        $("#b").text(itemexamstu.itemExam.b);
        $("#c").text(itemexamstu.itemExam.c);
        $("#d").text(itemexamstu.itemExam.d);
        $("#point").val(itemexamstu.itemExam.point);
        $("#rightAnswer").val(itemexamstu.itemExam.rightAnswer);
        $(".choice").removeClass("multipleChoice");
        $(".choice").removeClass("singleChoice");
        $(".choice").removeClass("bgc-tea-green-2");
        if (itemexamstu.itemExam.type == 0) {
            $("#type").text(".Single Choice");
            $(".choice").addClass('singleChoice');
        } else {
            $("#type").text(".Mutiple Choice");
            $(".choice").addClass('multipleChoice');
        }
    }

</script>
<script>
    $("#no1").trigger('click');
    $(".singleChoice").click(function () {
        var className = String($(this).attr('class'));
        if(className=='card choice multipleChoice bgc-tea-green-2' || className=='card choice multipleChoice')
        {
            if (className == 'card choice multipleChoice bgc-tea-green-2') {
            $(this).removeClass("bgc-tea-green-2");
            var answer = $(this).find('.choiceName').html();
            var before = $('#answer').val();
            var after = before.replace(answer, '');
            $("#answer").val(after);
        } else {
            $(this).addClass('bgc-tea-green-2');
            var answer = $(this).find('.choiceName').html();
            var before = $('#answer').val();
            var after = before + answer;
            $("#answer").val(after);
        }
        }
        else{
        $(this).parent().parent().find(".singleChoice").removeClass("bgc-tea-green-2");
        $(this).addClass('bgc-tea-green-2');
        var answer = $(this).find('.choiceName').html();
        $("#answer").val(answer);}

    });
    $(".multipleChoice").click(function () {
        var className = String($(this).attr('class'));
        if (className == 'card choice multipleChoice bgc-tea-green-2') {
            $(this).removeClass("bgc-tea-green-2");
            var answer = $(this).find('.choiceName').html();
            var before = $('#answer').val();
            var after = before.replace(answer, '');
            $("#answer").val(after);
        } else {
            $(this).addClass('bgc-tea-green-2');
            var answer = $(this).find('.choiceName').html();
            var before = $('#answer').val();
            var after = before + answer;
            $("#answer").val(after);
        }
    });
    $("#complete").click(function () {

          var answer = $("#answer").val();
            var rightAnswer = $("#rightAnswer").val() + '';
            answer = answer.toUpperCase();
            rightAnswer = rightAnswer.toUpperCase();
            var point = $("#point").val() + '';
            var isCorrect = true;
            for (i = 0; i < rightAnswer.length; i++) {
                if (answer.indexOf(rightAnswer.charAt(i)) < 0) isCorrect = false;
            }
            var stuPoint = 0;
            if (isCorrect) stuPoint = point;
            var itemEditStu = {
                itemId: $("#itemId").val(),
                stuId: $("#stuId").val(),
                stuAnswer: $("#answer").val(),
                isCorrect: isCorrect,
                stuPoint: stuPoint
            };
            $.ajax({
                type: "PUT",
                url: "/student/item/edit/student",
                data: itemEditStu,
                success: function (data) {
                    if (data.status == 401) {
                        alert("测试为空或服务器错误，保存失败");
                    } else {

                    }
                },
                dataType: "json"
            });




     var stugetreq={
     examid:$("#examId").val(),
     stuid:$("#stuId").val()
     };

     $.ajax({
            type: "PUT",
            url: "/student/exam/submit",
            data: JSON.stringify(stugetreq),
            success: function (data) {
                if (data.status == 400) {
                    alert("测试为空或服务器错误，提交失败！");
                } else {
                    alert("提交成功!");
                   $("#studentpage").trigger('click');
                }
            },
            dataType: "json",
            contentType: "application/json"
        });



    });
</script>
<script>
    function start(min) {
        var millionseconds = min * 60000;
        TimeDown("duration", millionseconds)
    }

    /*
     时间倒计时
     TimeDown.js
     */
    function TimeDown(id, value) {

        //倒计时的总秒数
        var totalSeconds = parseInt(value / 1000);

        //取模（余数）
        var modulo = totalSeconds % (60 * 60 * 24);
        //小时数
        var hours = Math.floor(modulo / (60 * 60));
        modulo = modulo % (60 * 60);
        //分钟
        var minutes = Math.floor(modulo / 60);
        //秒
        var seconds = modulo % 60;

        hours = hours.toString().length == 1 ? '0' + hours : hours;
        minutes = minutes.toString().length == 1 ? '0' + minutes : minutes;
        seconds = seconds.toString().length == 1 ? '0' + seconds : seconds;

        //输出到页面
        document.getElementById(id).innerHTML = hours + ":" + minutes + ":" + seconds;
        //延迟一秒执行自己
        if (hours == "00" && minutes == "00" && parseInt(seconds) - 1 < 0) {
            alert("时间到！交卷！");
            $('complete').trigger('click');
        } else {
            setTimeout(function () {
                TimeDown(id, value - 1000);
            }, 1000)
        }

    }

</script>
<script language="javascript" type="text/javascript">
    $("#duration").trigger('click');

</script>

<!-- Additional JS -->
<script th:src="@{${staticpath}+'js/jquery-3.5.1.min.js?8108'}"></script>
<script th:src="@{${staticpath}+'js/bootstrap.bundle.min.js?3483'}"></script>
<script th:src="@{${staticpath}+'js/blocs.min.js?6395'}"></script>
<script th:src="@{${staticpath}+'js/lazysizes.min.js'}" defer></script>
<script th:src="@{${staticpath}+'js/cookieconsent.min.js?5627'}"></script>
<script th:src="@{${staticpath}+'js/scrollFX.js?896'}"></script>
<!-- Additional JS END -->


</body>
</html>
